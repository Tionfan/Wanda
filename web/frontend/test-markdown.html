<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown渲染测试</title>
    <link rel="stylesheet" href="style.css">
    <!-- Markdown解析库 -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- 代码高亮库 -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css">
</head>

<body>
    <div class="container">
        <header class="header">
            <h1>🧪 Markdown渲染测试</h1>
            <p class="subtitle">测试前端Markdown渲染功能</p>
        </header>

        <div class="chat-container">
            <div class="chat-messages" id="chatMessages">
                <div class="message assistant-message">
                    <div class="message-content">
                        <div class="message-text" id="testContent">
                            <!-- 这里将插入测试的Markdown内容 -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 测试Markdown内容
        const testMarkdown = `# 政策解答示例

## 失业保险金相关政策

### 发放标准
根据最新政策，失业保险金的发放标准如下：

1. **第1-12个月**：2305元/月
2. **第13-24个月**：1844元/月  
3. **延长领取期间**：1650元/月

### 申请条件
申请失业保险金需要满足以下条件：

- 失业前用人单位和本人已经缴纳失业保险费满一年的
- 非因本人意愿中断就业的
- 已经进行失业登记，并有求职要求的

### 重要提醒
> **注意**：上述失业保险金支付标准自2025年7月1日起执行。

### 代码示例
如果您需要计算失业保险金，可以参考以下Python代码：

\`\`\`python
def calculate_unemployment_benefit(months):
    """计算失业保险金总额"""
    total = 0
    for month in range(1, months + 1):
        if month <= 12:
            total += 2305
        elif month <= 24:
            total += 1844
        else:
            total += 1650
    return total

# 计算12个月的失业保险金
benefit_12_months = calculate_unemployment_benefit(12)
print(f"12个月失业保险金总额: {benefit_12_months}元")
\`\`\`

### 联系方式
如有疑问，请联系：
- 电话：12333
- 网站：[人社部官网](http://www.mohrss.gov.cn)

---

*本信息仅供参考，具体政策请以官方发布为准。*`;

        // 配置marked
        if (typeof marked !== 'undefined') {
            marked.setOptions({
                highlight: function (code, lang) {
                    if (typeof Prism !== 'undefined' && Prism.languages[lang]) {
                        return Prism.highlight(code, Prism.languages[lang], lang);
                    }
                    return code;
                },
                breaks: true,
                gfm: true,
                sanitize: false,
                smartLists: true,
                smartypants: true
            });
        }

        // 渲染测试内容
        function renderTest() {
            const testContent = document.getElementById('testContent');
            if (typeof marked !== 'undefined') {
                testContent.innerHTML = marked.parse(testMarkdown);
                // 触发代码高亮
                if (typeof Prism !== 'undefined') {
                    Prism.highlightAllUnder(testContent);
                }
            } else {
                testContent.textContent = '❌ marked库未加载';
            }
        }

        // 页面加载完成后渲染
        window.addEventListener('load', renderTest);
    </script>
</body>

</html>